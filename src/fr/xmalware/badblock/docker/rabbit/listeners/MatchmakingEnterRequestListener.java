package fr.xmalware.badblock.docker.rabbit.listeners;

import fr.badblock.api.common.minecraft.matchmaking.MatchmakingEnterRequest;
import fr.badblock.api.common.tech.rabbitmq.RabbitService;
import fr.badblock.api.common.tech.rabbitmq.listener.RabbitListener;
import fr.badblock.api.common.tech.rabbitmq.listener.RabbitListenerType;
import fr.xmalware.badblock.docker.dockers.Docker;
import fr.xmalware.badblock.docker.dockers.LocalDocker;

public class MatchmakingEnterRequestListener extends RabbitListener
{

	public MatchmakingEnterRequestListener(RabbitService rabbitService, String name, RabbitListenerType type, boolean debug)
	{
		super(rabbitService, name, type, debug);
	}

	@Override
	public void onPacketReceiving(String body)
	{
		MatchmakingEnterRequest request = Docker.getInstance().getGson().fromJson(body, MatchmakingEnterRequest.class);

		if (request == null)
		{
			return;
		}
		
		LocalDocker localDocker = LocalDocker.getInstance();
		localDocker.getMatchmaking().push(request);
	}

}
