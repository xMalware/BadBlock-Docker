package fr.xmalware.badblock.docker.utils;

import java.util.List;
import java.util.Random;
import java.util.stream.Collectors;

import fr.xmalware.badblock.docker.instances.InstanceEntity;

public class FinderUtils {

	public static int findFirstAvailableNumber(List<InstanceEntity> entities)
	{
		List<Integer> usedNumbers = entities.parallelStream().map(entity -> entity.getId()).collect(Collectors.toList());
		boolean used = true;
		int i = getRandId();
		
		while (used)
		{
			i = getRandId();
			if (!usedNumbers.contains(i))
			{
				used = false;
				return i;
			}
		}
		
		return -1;
	}
	
	private static int getRandId()
	{
		return new Random().nextInt(999 - 108) + 108;
	}
	
}
