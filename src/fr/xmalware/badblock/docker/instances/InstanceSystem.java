package fr.xmalware.badblock.docker.instances;

import java.util.ArrayList;
import java.util.List;

import com.mongodb.BasicDBList;
import com.mongodb.BasicDBObject;

import lombok.Getter;

@Getter
public class InstanceSystem
{
	
	private String				name;
	private WorldSystem[]	worlds;
	private String[]				priorityServers;

	public InstanceSystem(BasicDBObject data)
	{
		name = data.getString("name");
		BasicDBList dbList = (BasicDBList) data.get("priorityServers");
		priorityServers = new String[dbList.size()];
		priorityServers = dbList.toArray(priorityServers);
		
		List<WorldSystem> worldSystems = new ArrayList<>();
		
		dbList = (BasicDBList) data.get("worlds");
		Object[] dbObjects = (Object[]) dbList.toArray();
		for (Object object : dbObjects)
		{
			BasicDBObject obj = (BasicDBObject) object;
			worldSystems.add(new WorldSystem(this, obj));
		}

		worlds = new WorldSystem[worldSystems.size()];
		worlds = worldSystems.toArray(worlds);
	}
	
}